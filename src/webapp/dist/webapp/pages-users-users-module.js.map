{"version":3,"sources":["./src/app/pages/users/users.module.ts","./src/app/pages/users/users.component.ts","./src/app/pages/users/users.component.html","./src/app/pages/users/user-modal/user-modal.component.ts","./src/app/pages/users/user-modal/user-modal.component.html"],"names":[],"mappings":"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","file":"pages-users-users-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from 'src/app/shared';\nimport { UserModalComponent } from './user-modal/user-modal.component';\nimport { UsersComponent } from './users.component';\n\nconst routes: Routes = [\n    { path: '', component: UsersComponent }\n];\n\nconst MODULE_COMPONENT = [\n    UsersComponent,\n    UserModalComponent\n];\n\n@NgModule({\n    declarations: MODULE_COMPONENT,\n    imports: [RouterModule.forChild(routes), SharedModule],\n    entryComponents: [\n        UserModalComponent\n    ]\n})\nexport class UsersModule { }","import { Component, OnInit } from '@angular/core';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { IAMService } from 'src/app/core/services';\nimport { concat, EMPTY, timer } from \"rxjs\";\nimport { switchMapTo } from \"rxjs/operators\";\nimport { DatePipe } from \"@angular/common\";\nimport { UserModalComponent } from './user-modal/user-modal.component';\nimport { CreateUserRequest, UpdateUserRequest, User } from 'src/app/core/models';\nimport { ActionEnum, ConfigColumn } from 'src/app/shared/components/cm-table-container/models/config-column.model';\nimport { DataValue } from 'src/app/shared/components/cm-table-container/models/data-value.model';\nimport { RemovePopupComponent } from 'src/app/shared/components/comfirmation-popup/remove/remove-popup.component';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\n@Component({\n    selector: 'users',\n    templateUrl: './users.component.html',\n    styleUrls: ['./users.component.scss'],\n    providers: [DatePipe]\n})\nexport class UsersComponent implements OnInit {\n\n    public config: ConfigColumn;\n\n    constructor(private modalService: NgbModal,\n        private spinner: NgxSpinnerService,\n        private datePipe: DatePipe,\n        private iamService: IAMService) {\n    }\n\n    ngOnInit() {\n        this.iamService.getUsers().subscribe(users => this.initUserColomns(users))\n    }\n\n    public openModal() {\n        const modal: NgbModalRef = this.initPopUp(UserModalComponent);\n        modal.componentInstance.triggerSave.subscribe((dataValue: DataValue) => {\n            this.spinner.show();\n            if (dataValue.action === ActionEnum.CREATE) {\n                this.createUser(dataValue.value as CreateUserRequest);\n            }\n        });\n    }\n\n    private createUser(event: CreateUserRequest): void {\n        concat(\n            this.iamService.addUser(event).pipe(switchMapTo(EMPTY)),\n            timer(1000).pipe(switchMapTo(EMPTY)),\n            this.iamService.getUsers()\n        ).subscribe((users: User[]) => {\n            this.spinner.hide();\n            this.modalService.dismissAll();\n            this.config = { ...this.config, value: users };\n        })\n    }\n\n    private updateUser(event: UpdateUserRequest): void {\n        concat(\n            this.iamService.updateUser(event).pipe(switchMapTo(EMPTY)),\n            timer(1000).pipe(switchMapTo(EMPTY)),\n            this.iamService.getUsers()\n        ).subscribe((users: User[]) => {\n            this.spinner.hide();\n            this.modalService.dismissAll();\n            this.config = { ...this.config, value: users };\n        })\n    }\n\n    public getArrayForm(event: DataValue) {\n        if (event.action === ActionEnum.DELETE) {\n            let modalRef = this.initPopUp(RemovePopupComponent);\n            modalRef.componentInstance.config = { title: \"Confirmation de suppression\", message: \"Est-ce que vous confirmez la suppression définitive ?\" };\n            modalRef.componentInstance.sendData.subscribe((data: boolean) => data ? this.deleteUser((event.value as User)) : null);\n        } else {\n            let modalRef = this.initPopUp(UserModalComponent);\n            modalRef.componentInstance.editUser = event.value as User;\n            modalRef.componentInstance.triggerSave.subscribe((dataValue: DataValue) => {\n                this.spinner.show();\n                if (dataValue.action === ActionEnum.UPDATE) {\n                    this.updateUser(dataValue.value as UpdateUserRequest);\n                }\n            });\n        }\n    }\n\n    private deleteUser(event): void {\n        this.spinner.show();\n        concat(\n            this.iamService.deleteUser(event.id).pipe(switchMapTo(EMPTY)),\n            timer(1000).pipe(switchMapTo(EMPTY)),\n            this.iamService.getUsers()\n        ).subscribe((users: User[]) => {\n            this.spinner.hide();\n            this.modalService.dismissAll();\n            this.config = { ...this.config, value: users };\n        })\n    }\n\n    private initPopUp(content: any): NgbModalRef {\n        return this.modalService.open(content,\n            {\n                size: 'lg',\n                ariaLabelledBy: 'modal-basic-title',\n                keyboard: false,\n                backdrop: 'static',\n                centered: true\n            });\n    }\n\n    private initUserColomns(result): void {\n        this.config = {\n            id: \"user\",\n            value: result,\n            sortableBy: \"username\",\n            pagination: {\n                paginate: true,\n                rowsPerPage: 10,\n                rowsPerPageOptions: [10, 15, 20, 25]\n            },\n            actions: [\n                {\n                    name: ActionEnum.UPDATE,\n                    icon: {\n                        class: \"icon-edit size-16\",\n                        tooltip: \"Modifier\"\n                    }\n                },\n                {\n                    name: ActionEnum.DELETE,\n                    icon: {\n                        class: \"icon-trash size-16\",\n                        tooltip: \"Supprimer\"\n                    }\n                }\n            ],\n            columns: [\n                {\n                    header: \"Nom d'utilisateur\",\n                    field: \"username\",\n                    filterable: true,\n                    sortable: true\n                },\n                {\n                    header: \"Nom\",\n                    field: \"firstName\",\n                    filterable: true,\n                    sortable: true\n                },\n                {\n                    header: \"Prénom\",\n                    field: \"lastName\",\n                    filterable: true,\n                    sortable: true,\n                },\n                {\n                    header: \"Email\",\n                    field: \"email\",\n                    filterable: true,\n                    sortable: true\n                },\n                {\n                    header: \"Role\",\n                    field: \"roles\",\n                    filterable: true,\n                    sortable: true\n                },\n                {\n                    header: \"Date de création\",\n                    field: \"createdTimestamp\",\n                    pipe: {\n                        function: this.datePipe\n                    },\n                    filterable: true,\n                    sortable: true\n                }\n            ]\n        }\n    }\n}","<div class=\"row bg-default-200\">\n    <div class=\"col-12 px-0\">\n        <ol class=\"breadcrumb d-none d-lg-block\">\n            <li class=\"breadcrumb-item\">\n                <a href=\"/\">\n                    <i class=\"icons icon-home size-20 color-text\"></i> Accueil </a>\n            </li>\n            <li class=\"breadcrumb-item active\">Utilisateurs</li>\n        </ol>\n    </div>\n</div>\n\n<ngx-spinner bdColor=\"rgba(0, 0, 0, 0.8)\" size=\"medium\" color=\"#ccb581\" type=\"ball-circus\" [fullScreen]=\"true\">\n    <p class=\"color-white\"> Loading... </p>\n</ngx-spinner>\n\n<div class=\"row bg-white\" style=\"box-shadow: 10px 5px 5px #e6e6e6;\">\n    <div class=\"col-12\">\n\n        <div class=\"row border-bottom\">\n            <div class=\"col-12\">\n                <div class=\"search-criteria\">\n\n                    <div class=\"py-2\">\n                        <div class=\"float-left\">\n                            <p class=\"bold color-title font-size-20 mb-0\">Liste des utilisateurs</p>\n                        </div>\n                        <div class=\"dropdown float-right\">\n                            <button type=\"button\" class=\"btn btn-bg-add font-size-12 btn-add mb-0 color-white\"\n                                (click)=\"openModal()\">\n                                <span class=\"pl-1\">Nouveau</span>\n                            </button>\n                            <span ngbTooltip=\"Rechercher\">\n                                <a>\n                                    <i class=\"icon-search icons mx-2 my-1\"></i>\n                                </a>\n                            </span>\n                        </div>\n                        <div class=\"clearfix\"></div>\n                    </div>\n\n                    <div class=\"accordion mb-0\" role=\"tablist\" aria-multiselectable=\"true\">\n                        <div class=\"card card-search\">\n                            <div id=\"search-criteria-one\" class=\"border-top collapse\" role=\"tabpanel\"\n                                aria-labelledby=\"headingOne\">\n                                <div class=\"card-block bg-white py-4\" style=\"overflow: visible;\">\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <div class=\"col-12 mb-4 px-0\">\n            <cm-table-container [currentConfig]=\"config\" (sendData)=\"getArrayForm($event)\"></cm-table-container>\n        </div>\n\n    </div>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Observable } from 'rxjs';\nimport { CreateUserRequest, UpdateUserRequest, User } from 'src/app/core/models';\nimport { IAMService } from 'src/app/core/services';\nimport { ActionEnum } from 'src/app/shared/components/cm-table-container/models/config-column.model';\nimport { DataValue } from 'src/app/shared/components/cm-table-container/models/data-value.model';\n\n@Component({\n    templateUrl: './user-modal.component.html',\n    styleUrls: ['./user-modal.component.scss']\n})\nexport class UserModalComponent implements OnInit {\n\n    @Output()\n    public triggerSave: EventEmitter<DataValue> = new EventEmitter();\n\n    @Input()\n    public editUser: User;\n\n    public form: FormGroup;\n\n    public roles$: Observable<string[]>;\n\n    constructor(private fb: FormBuilder,\n        private activeModal: NgbActiveModal,\n        private iamService: IAMService) {\n    }\n\n    ngOnInit() {\n        this.initForm();\n        this.roles$ = this.iamService.getRoles();\n        if (this.editUser) {\n            this.form.patchValue({\n                firstname: this.editUser.firstName,\n                lastname: this.editUser.lastName,\n                email: this.editUser.email,\n                role: this.editUser.roles[0]\n            })\n        }\n    }\n\n    public save() {\n        if (this.form.valid) {\n            let dataValue: DataValue = { action: ActionEnum.CREATE, value: this.form.value as CreateUserRequest };\n            this.triggerSave.emit(dataValue);\n        }\n    }\n\n    public update() {\n        if (this.form.valid) {\n            let arg = new UpdateUserRequest(this.editUser.id, this.form.get(\"email\").value, this.form.get(\"role\").value);\n            let dataValue: DataValue = { action: ActionEnum.UPDATE, value: arg };\n            this.triggerSave.emit(dataValue);\n        }\n    }\n\n    public reset() {\n        this.form.reset();\n        this.closeModal();\n    }\n\n    public closeModal(): void {\n        this.activeModal.close();\n    }\n\n    private initForm(): void {\n        this.form = this.fb.group({\n            firstname: [null, Validators.required],\n            lastname: [null, Validators.required],\n            email: [null, [Validators.required, Validators.email]],\n            role: [null, Validators.required],\n        })\n    }\n\n}","<div class=\"modal-header mt-3\">\n    <h2 *ngIf=\"!editUser\" class=\"h3 modal-title text-center font-size-24 bold\" style=\"width: 100%;\">Ajouter un utilisateur</h2>\n    <h2 *ngIf=\"editUser\" class=\"h3 modal-title text-center font-size-24 bold\" style=\"width: 100%;\">Modifier un utilisateur</h2>\n    <span class=\"close\" aria-label=\"Close\" data-dismiss=\"modal\" (click)=\"closeModal()\" style=\"cursor: pointer;\">\n        <span aria-hidden=\"true\">&times;</span>\n    </span>\n</div>\n\n<form [formGroup]=\"form\">\n    <div class=\"modal-body mb-2\">\n        <div class=\"row pt-1\" style=\"padding-right: 5%;\">\n            <div class=\"col-12 px-0 mb-2\">\n\n                <div class=\"row mt-4\">\n                    <div class=\"col-3 py-2 px-0\">\n                        <label class=\"float-right\">Nom : </label>\n                    </div>\n                    <div class=\"col-9\">\n                        <input type=\"text\" formControlName=\"firstname\" [attr.disabled]=\"editUser\">\n                    </div>\n                </div>\n\n                <div class=\"row\">\n                    <div class=\"col-3 py-2 px-0\">\n                        <label class=\"float-right\">Prénom : </label>\n                    </div>\n                    <div class=\"col-9\">\n                        <input type=\"text\" formControlName=\"lastname\" [attr.disabled]=\"editUser\">\n                    </div>\n                </div>\n\n                <div class=\"row\">\n                    <div class=\"col-3 py-2 px-0\">\n                        <label class=\"float-right\">Email : </label>\n                    </div>\n                    <div class=\"col-9\">\n                        <input type=\"text\" formControlName=\"email\">\n                    </div>\n                </div>\n\n                <div class=\"row\">\n                    <div class=\"col-3 py-2 px-0\">\n                        <label class=\"float-right\">Role : </label>\n                    </div>\n                    <div class=\"col-9\">\n                        <ng-select [items]=\"roles$ | async\" formControlName=\"role\"></ng-select>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n    <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-default\" (click)=\"reset()\">Annuler</button>\n        <button type=\"button\" class=\"btn btn-bg-primary\" (click)=\"editUser ? update() : save()\" [disabled]=\"!form.valid\">Confirmer</button>\n    </div>\n</form>"],"sourceRoot":"webpack:///"}